Выполнение [домашнего задания](https://github.com/netology-code/sysadm-homeworks/blob/devsys10/03-sysadmin-03-os/README.md) 
по теме "3.3. Операционные системы, лекция 1".

## Q/A

1. Какой системный вызов делает команда `cd`?

Для удобства поиска перенаправим вывод команды `strace` в утилиту `less`

```shell
strace /bin/bash -c 'cd /tmp' 2>&1 | less
```

Далее, найдём в трейсе упоминание директории `tmp`, указанной в команде. Таким образом, обнаружим, что команда `cd` 
делает системный вызов `chdir("/tmp")`.

2. Используя `strace` выясните, где находится база данных `file` на основании которой она делает свои догадки.

При использовании команды `file` на любом файле, `strace` выведет такую строку:

```
openat(AT_FDCWD, "/usr/share/misc/magic.mgc", O_RDONLY) = 3
```

Предположительно, `/usr/share/misc/magic.mgc` - это и есть база данных для команды `file`.

3. Предложите способ обнуления открытого удаленного файла (чтобы освободить место на файловой системе)

Зная PID процесса и то, что каждый процесс пишет свои потоки в файлы в директории `/proc/<PID>/fd`.
Таким образом, можно найти конкретный поток, который пишет в файл, вызвав команду

```shell
ls -la /proc/1988/fd/

total 0
dr-x------ 2 vagrant vagrant  0 Feb 16 03:25 .
dr-xr-xr-x 9 vagrant vagrant  0 Feb 16 03:25 ..
lrwx------ 1 vagrant vagrant 64 Feb 16 03:25 0 -> /dev/pts/0
lrwx------ 1 vagrant vagrant 64 Feb 16 03:25 1 -> /dev/pts/0
lrwx------ 1 vagrant vagrant 64 Feb 16 03:25 2 -> /dev/pts/0
lr-x------ 1 vagrant vagrant 64 Feb 16 03:25 3 -> /tmp/do_not_delete_me
```

В данном случае, поток под номером 3 держит соединение с искомым файлом. Таким образом, чтобы обнулить данный файл,
достаточно направить пустую строку в данный поток:

```shell
echo "" > /proc/1988/fd/3
```
